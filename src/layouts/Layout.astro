---
import "../styles/global.css";
import Navbar from "../components/Navbar.astro";

export interface Props {
	title: string;
	description?: string;
}

const {
	title,
	description = "Сучасні, потужні інструменти для вашого бізнесу",
} = Astro.props;
---

<!doctype html>
<html lang="uk">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link
			rel="preload"
			href="/assets/fonts/VisueltPro-Regular.ttf"
			as="font"
			type="font/ttf"
			crossorigin
		/>
		<link
			rel="preload"
			href="/assets/fonts/VisueltPro-Medium.ttf"
			as="font"
			type="font/ttf"
			crossorigin
		/>
		<link
			rel="preload"
			href="/assets/fonts/VisueltPro-Bold.ttf"
			as="font"
			type="font/ttf"
			crossorigin
		/>
		<title>{title}</title>
	</head>
	<body class="font-sans antialiased bg-black text-foreground">
		<div class="relative z-50">
			<Navbar />
		</div>

		<slot />

		<script>
			// Download App Button Functionality
			document.addEventListener("DOMContentLoaded", () => {
				// Get all download app buttons and popups
				const downloadButtons =
					document.querySelectorAll(".download-app-btn");
				const qrPopups = document.querySelectorAll(".qr-popup");

				downloadButtons.forEach((button, index) => {
					const popup = qrPopups[index];

					// Show QR popup on hover (for all devices)
					button.addEventListener("mouseenter", () => {
						if (popup) {
							popup.classList.remove("hidden");
							popup.classList.add("animate-fade-in");
						}
					});

					button.addEventListener("mouseleave", () => {
						if (popup) {
							popup.classList.add("hidden");
							popup.classList.remove("animate-fade-in");
						}
					});
				});

				// Close popups when clicking outside
				document.addEventListener("click", (e) => {
					const target = e.target as Element;
					if (
						target &&
						!target.closest(".download-app-btn") &&
						!target.closest(".qr-popup")
					) {
						qrPopups.forEach((popup) => {
							popup.classList.add("hidden");
							popup.classList.remove("animate-fade-in");
						});
					}
				});
			});
		</script>

		<style>
			.animate-fade-in {
				animation: fadeIn 0.3s ease-out;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translate(-50%, 10px);
				}
				to {
					opacity: 1;
					transform: translate(-50%, 0);
				}
			}
		</style>
	</body>
</html>
